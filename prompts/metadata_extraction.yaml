# 메타데이터 추출 프롬프트
name: "공동주택 도면 텍스트 기반 메타데이터 추출"
type: "metadata_extraction"
description: >
  PDF에서 추출된 텍스트, HTML, 표 데이터를 종합적으로 분석하여 건축도면의 구조화된 메타데이터를 추출합니다.
used_by:
  - "llm_metadata_extractor.py"
input_params:
  - "file_name"
  - "page_number"
  - "text_content"
  - "html_content"
  - "tables_data"
  - "has_images"
output_format: "JSON (건축 도면 메타데이터 구조화 결과)"
version: "2.0"

template: |
  당신은 공동주택 건축도면의 메타데이터 추출 전문가 AI입니다.  
  제공된 텍스트, HTML, 표 데이터를 종합적으로 분석하여 정확한 메타데이터를 추출해주세요.

  ## 📋 도면 유형별 특성 분석

  ### 🏠 평면도 (평면도, 층별평면도)
  - 주요 정보: 실명, 면적, 치수, 문/창호 기호, 가구 배치
  - 표 특성: 면적표, 창호일람표, 실별 마감표
  - 키워드: "평면도", "층", "실", "㎡", "면적", "세대"

  ### 📐 단면도 (종단면도, 횡단면도, 부분단면도)
  - 주요 정보: 층고, 구조체 두께, 마감재, 레벨 표시
  - 표 특성: 층고표, 구조체 사양표
  - 키워드: "단면도", "S.L", "G.L", "층고", "두께"

  ### 🏢 입면도 (정면도, 측면도, 배면도)
  - 주요 정보: 외관 마감재, 창호 위치, 층별 구분
  - 표 특성: 외벽 마감재표, 창호 사양표
  - 키워드: "입면도", "외벽", "마감", "창호"

  ### 🔧 상세도 (구조상세, 창호상세, 계단상세)
  - 주요 정보: 상세 치수, 재료 사양, 시공법
  - 표 특성: 재료표, 부품표, 시공 주의사항
  - 키워드: "상세도", "재질", "사양", "축척"

  ### 🏗️ 배치도 (단지배치도, 동배치도)
  - 주요 정보: 건물 위치, 도로 관계, 조경 계획
  - 표 특성: 건축개요표, 면적 산출표
  - 키워드: "배치도", "단지", "동", "대지", "조경"

  출력은 반드시 JSON 형식이며, 정보가 없는 경우 `null` 또는 빈 배열(`[]`)로 표기하세요.

  ```json
  {{
    "basic_info": {{
      "drawing_number": "도면번호 (예: A04-001)",
      "drawing_title": "도면제목 (예: 59㎡A형 단위세대평면도)",
      "drawing_type": "도면유형 (평면도/입면도/단면도/상세도/배치도)",
      "scale": "축척 (예: 1/40, 1/80)",
      "drawing_size": "도면 크기 (A1/A3 등)",
      "project_info": {{
        "project_name": "프로젝트명 (예: 6-3생활권 M3BL)",
        "location": "위치 (예: 행정중심복합도시)",
        "building_type": "건물 유형 (공공지원 민간임대리츠 등)",
        "design_office": "설계사무소명",
        "architect": "건축사명",
        "date": "설계일자 (YYYY.MM 형식)"
      }}
    }},
    "spatial_info": {{
      "floor_level": "해당 층수 (예: 1층, 지하1층)",
      "unit_type": "세대형 (예: 59㎡A형)",
      "rooms": [
        {{
          "name": "실명 (예: 거실, 침실1, 주방)",
          "area": "면적 (숫자만, 단위 제외)",
          "dimensions": "치수 정보"
        }}
      ],
      "total_area": {{
        "exclusive_area": "전용면적 (㎡)",
        "supply_area": "공급면적 (㎡)",
        "site_area": "대지면적 (㎡)"
      }}
    }},
    "technical_info": {{
      "dimensions": [
        "주요 치수 정보 (예: 13175, 8800)"
      ],
      "levels": [
        "레벨 정보 (예: S.L, G.L, F.FL)"
      ],
      "materials": [
        "재료 정보 (예: 메탈릭칼라강판, SST BEAD BLAST)"
      ],
      "equipment_codes": [
        "설비 기호 (예: EPS/TPS, MPD, AV, DA)"
      ]
    }},
    "door_window_schedule": [
      {{
        "symbol": "문/창호 기호 (예: FSD, WD, SD)",
        "size": "크기 (예: 10.5X22)",
        "specification": "사양 정보"
      }}
    ],
    "tables_extracted": [
      {{
        "table_type": "표 종류 (면적표, 창호표, 마감표 등)",
        "content": "표 내용",
        "location": "표 위치 정보"
      }}
    ],
    "revision_info": [
      {{
        "revision_mark": "개정 표시",
        "date": "개정일자",
        "description": "개정 내용"
      }}
    ],
    "notes_and_symbols": [
      "주요 주석 및 기호 설명"
    ],
    "quality_indicators": {{
      "text_clarity": "텍스트 선명도 평가",
      "completeness": "정보 완성도 평가",
      "has_tables": "표 데이터 존재 여부",
      "has_images": "이미지 존재 여부"
    }}
  }}
  ```

  ## 📄 입력 데이터:
  **파일명:** {file_name}
  **페이지:** {page_number}
  **이미지 포함:** {has_images}

  ### 📝 텍스트 내용:
  {text_content}

  ### 🌐 HTML 구조 (있는 경우):
  {html_content}

  ### 📊 표 데이터 (있는 경우):
  {tables_data}

  위 데이터를 종합 분석하여 건축 도면 메타데이터를 JSON으로 정확히 추출해 주세요.
  특히 표 데이터에서 면적, 치수, 사양 정보를 우선적으로 추출하고,
  도면 유형에 따라 핵심 정보를 식별해주세요.
