name: "ë©”íƒ€ë°ì´í„° Self-Query í˜•ì‹ ë³€í™˜"
type: "metadata_extraction"
description: >
  ê¸°ì¡´ ë©”íƒ€ë°ì´í„°ë¥¼ Self-Query Retriever í˜¸í™˜ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í”„ë¡¬í”„íŠ¸.
  ê²€ìƒ‰/í•„í„°ë§ ê°€ëŠ¥í•œ í•„ë“œë¡œ ì •ê·œí™”í•˜ê³ , ë°ì´í„° íƒ€ì…ì„ í‘œì¤€í™”í•©ë‹ˆë‹¤.
used_by:
  - "extract_metadata_unified.py"
input_params:
  - "file_name"
  - "original_metadata"
output_format: "JSON (Self-Query í˜¸í™˜)"
version: "1.0"
template: |
  ë‹¹ì‹ ì€ ê±´ì¶• ë„ë©´ ë©”íƒ€ë°ì´í„°ë¥¼ Self-Query Retriever í˜¸í™˜ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤.

  ## ğŸ¯ ë³€í™˜ ëª©í‘œ
  ê¸°ì¡´ ë©”íƒ€ë°ì´í„°ë¥¼ ê²€ìƒ‰/í•„í„°ë§ì— ìµœì í™”ëœ Self-Query í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

  ## ğŸ“‹ ì…ë ¥ ì •ë³´
  **íŒŒì¼ëª…**: {file_name}
  
  **ê¸°ì¡´ ë©”íƒ€ë°ì´í„°**:
  ```json
  {original_metadata}
  ```

  ## ğŸ”§ ë³€í™˜ ê·œì¹™
  1. **page_content**: ë¬¸ì„œì˜ í•µì‹¬ ë‚´ìš©ì„ 1-2ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½
  2. **metadata**: ëª¨ë“  í•„ë“œëŠ” ê²€ìƒ‰/í•„í„°ë§ ê°€ëŠ¥í•œ íƒ€ì…ìœ¼ë¡œ ë³€í™˜
     - string: í…ìŠ¤íŠ¸ ì •ë³´
     - integer: ì •ìˆ˜ (ì¸µìˆ˜, ê°œìˆ˜ ë“±)
     - float: ì‹¤ìˆ˜ (ë©´ì , ë†’ì´, ë¹„ìœ¨ ë“±)
     - boolean: ì°¸/ê±°ì§“ (í¬í•¨ ì—¬ë¶€ ë“±)
     - null: ì •ë³´ ì—†ìŒ

  ## ğŸ“Š í•„ìˆ˜ ì¶œë ¥ í˜•ì‹
  ```json
  {{
    "page_content": "ë¬¸ì„œì˜ í•µì‹¬ ë‚´ìš© ìš”ì•½",
    "metadata": {{
      "drawing_number": "ë„ë©´ë²ˆí˜¸ ë˜ëŠ” null",
      "drawing_title": "ë„ë©´ ì œëª©",
      "drawing_type": "ë„ë©´ ìœ í˜• (í‰ë©´ë„/ì…ë©´ë„/ë‹¨ë©´ë„/ì¼ëŒí‘œ/ê°œìš” ë“±)",
      "project_name": "í”„ë¡œì íŠ¸ëª…",
      "project_address": "í”„ë¡œì íŠ¸ ì£¼ì†Œ ë˜ëŠ” null",
      "file_name": "íŒŒì¼ëª…",
      "page_number": í˜ì´ì§€ë²ˆí˜¸ (integer, ê¸°ë³¸ê°’ 1),
      "has_tables": í…Œì´ë¸”í¬í•¨ì—¬ë¶€ (boolean),
      "has_images": ì´ë¯¸ì§€í¬í•¨ì—¬ë¶€ (boolean),
      "land_area": ëŒ€ì§€ë©´ì  (float, ìˆ«ìë§Œ, ë‹¨ìœ„ì œê±°),
      "building_area": ê±´ì¶•ë©´ì  (float, ìˆ«ìë§Œ, ë‹¨ìœ„ì œê±°),
      "total_floor_area": ì—°ë©´ì  (float, ìˆ«ìë§Œ, ë‹¨ìœ„ì œê±°),
      "building_height": ê±´ë¬¼ë†’ì´ (float, ìˆ«ìë§Œ, ë‹¨ìœ„ì œê±°),
      "floors_above": ì§€ìƒì¸µìˆ˜ (integer),
      "floors_below": ì§€í•˜ì¸µìˆ˜ (integer),
      "parking_spaces": ì£¼ì°¨ëŒ€ìˆ˜ (integer),
      "apartment_units": ì„¸ëŒ€ìˆ˜ (integer),
      "building_coverage_ratio": ê±´íìœ¨ (float, ì†Œìˆ˜ì í˜•íƒœ),
      "floor_area_ratio": ìš©ì ë¥  (float, ì†Œìˆ˜ì í˜•íƒœ),
      "structure_type": "êµ¬ì¡°í˜•ì‹ ë˜ëŠ” null",
      "main_use": "ì£¼ìš©ë„ ë˜ëŠ” null",
      "approval_date": "ìŠ¹ì¸ì¼ì (YYYY-MM-DD í˜•ì‹) ë˜ëŠ” null",
      "design_firm": "ì„¤ê³„ì‚¬ ë˜ëŠ” null",
      "construction_firm": "ì‹œê³µì‚¬ ë˜ëŠ” null",
      "room_list": ["ë°©ëª©ë¡ë°°ì—´"] ë˜ëŠ” [],
      "extracted_at": "ì¶”ì¶œì¼ì‹œ (ISO 8601 í˜•ì‹)"
    }}
  }}
  ```

  ## âš ï¸ ì¤‘ìš” ì‚¬í•­
  - ìˆ«ì ê°’ì—ì„œ ë‹¨ìœ„(ã¡, m, ì¸µ ë“±)ë¥¼ ì œê±°í•˜ê³  ìˆ«ìë§Œ ì¶”ì¶œ
  - ì •ë³´ê°€ ì—†ìœ¼ë©´ null ì‚¬ìš© (ë¹ˆ ë¬¸ìì—´ ê¸ˆì§€)
  - ë°°ì—´ì´ ë¹„ì–´ìˆìœ¼ë©´ [] ì‚¬ìš©
  - JSON í˜•ì‹ë§Œ ì¶œë ¥, ì¶”ê°€ ì„¤ëª… ê¸ˆì§€
  - ëª¨ë“  ë¬¸ìì—´ì€ í•œêµ­ì–´ë¡œ ì •ê·œí™”

  ìœ„ ê·œì¹™ì— ë”°ë¼ ê¸°ì¡´ ë©”íƒ€ë°ì´í„°ë¥¼ Self-Query í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•´ì£¼ì„¸ìš”.
